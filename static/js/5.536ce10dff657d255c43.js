webpackJsonp([5],{STSY:function(e,t,a){"use strict";t.b=function(e){return Object(s.a)({url:"/admin/role/listByDeptId/"+e,method:"get"})},t.a=function(){return Object(s.a)({url:"/admin/role/list",method:"get"})};var s=a("vLgD")},cAgV:function(e,t,a){"use strict";var s=a("woOf"),r=a.n(s),i=(a("ctMr"),{bind:function(e,t){e.addEventListener("click",function(a){var s=r()({},t.value),i=r()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},s),o=i.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var n=o.getBoundingClientRect(),l=o.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(n.width,n.height)+"px",o.appendChild(l)),i.type){case"center":l.style.top=n.height/2-l.offsetHeight/2+"px",l.style.left=n.width/2-l.offsetWidth/2+"px";break;default:l.style.top=a.pageY-n.top-l.offsetHeight/2-document.body.scrollTop+"px",l.style.left=a.pageX-n.left-l.offsetWidth/2-document.body.scrollLeft+"px"}return l.style.backgroundColor=i.color,l.className="waves-ripple z-active",!1}},!1)}}),o=function(e){e.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(o)),i.install=o;t.a=i},cgTB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),r=a.n(s),i=a("vMJZ"),o=a("STSY"),n=a("NYxO"),l={directives:{waves:a("cAgV").a},data:function(){return{list:null,listLoading:!1,listPageParams:{pageNo:0,pageNum:20,username:""},tableKey:0,total:null,dialogFormVisible:!1,dialogStatus:"",dialogTitleMap:{update:"编辑用户",create:"添加用户"},editForm:{username:"",password:"",statu:"",deptName:"",roleId:""},editFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],company_bu:[{required:!0,message:"请输入单位主管",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],company_name:[{required:!0,message:"请输入单位名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],company_position:[{required:!0,message:"请输入单位经纬度",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],company_addr:[{required:!0,message:"请输入地址",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"blur"}],statu:[{required:!0,message:"请选择状态",trigger:"blur"}]},editRolesOptions:[],editIsDisabled:{0:!1,1:!0},statusOptions:[0,1,2]}},created:function(){this.getUserList(),this.getRoleList(),this.user_upd=this.permissions.user_upd,this.user_del=this.permissions.user_del,this.user_add=this.permissions.user_add},methods:{getUserList:function(){var e=this;this.listLoading=!0,Object(i.d)(this.listPageParams).then(function(t){e.list=t.data.list,e.total=t.data.total,e.listLoading=!1})},getRoleList:function(){var e=this;Object(o.a)().then(function(t){e.editRolesOptions=t.data})},handleAdd:function(){this.formReset(),this.dialogStatus="create",this.dialogFormVisible=!0},handleSearch:function(){this.listPageParams.pageNo=0,this.getUserList()},handlePageNumChange:function(e){this.listPageParams.pageNum=e,this.getUserList()},handlePageNoChange:function(e){this.listPageParams.pageNo=e,this.getUserList()},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该用户(用户名:"+e.username+"), 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.b)(e.userId).then(function(e){e.data?(t.getUserList(),t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})):t.$notify({title:"失败",message:"删除失败",type:"error",duration:2e3})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},formCreate:function(e){var t=this;this.$refs[e].validate(function(e){return e?(Object(i.a)(t.editForm).then(function(e){e.data?(t.dialogFormVisible=!1,t.getUserList(),t.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3})):t.$notify({title:"失败",message:"添加失败",type:"error",duration:2e3})}),e):e})},formCancel:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},formEdit:function(e){this.formReset(),this.dialogStatus="update",this.dialogFormVisible=!0,this.editForm.username=e.username,this.editForm.password="",this.editForm.company_bu=e.company_bu,this.editForm.company_name=e.company_name,this.editForm.company_position=e.company_position,this.editForm.company_addr=e.company_addr,this.editForm.company_status=e.company_status,this.editForm.userId=e.userId},formUpdate:function(e){var t=this;this.$refs[e].validate(function(e){return e?(Object(i.f)(t.editForm).then(function(e){e.data?(t.dialogFormVisible=!1,t.getUserList(),t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3})):t.$notify({title:"失败",message:"修改失败",type:"error",duration:2e3})}),e):e})},formReset:function(){this.editForm={username:"",password:"",statu:"",roleId:""}}},computed:r()({},Object(n.b)(["permissions"])),filters:{statusFilter:function(e){return{0:"筹备",1:"在建",2:"停止"}[e]}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"用户名"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleSearch(t)}},model:{value:e.listPageParams.username,callback:function(t){e.$set(e.listPageParams,"username",t)},expression:"listPageParams.username"}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:function(t){e.handleSearch()}}},[e._v("搜索")]),e._v(" "),e.user_add?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:function(t){e.handleAdd()}}},[e._v("添加")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"数据加载中...",border:"",fit:"","highlight-current-row":"","default-sort":{prop:"userId",order:"descending"}}},[a("el-table-column",{attrs:{align:"center",label:"序号",sortable:"",prop:"userId"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.userId))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[t.row.picUrl?a("img",{staticClass:"user-picUrl",staticStyle:{width:"20px",height:"20px","border-radius":"50%"},attrs:{src:t.row.picUrl}}):e._e(),e._v("\n          "+e._s(t.row.username)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"单位名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.company_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"单位主管"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.company_bu))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"单位位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.company_position))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"单位地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.company_addr))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","class-name":"status-col",label:"单位状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:0==t.row.company_status?"warning":1==t.row.company_status?"scucess":"danger"}},[e._v(e._s(e._f("statusFilter")(t.row.company_status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"所属角色","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roleList,function(t,s){return a("span",{key:s},[e._v(e._s(t.roleDesc))])})}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",sortable:"",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTime")(t.row.createTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.user_upd?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"small",type:"success"},on:{click:function(a){e.formEdit(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),e.user_del?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.listPageParams.pageNo+1,"page-sizes":[20,40,60,80,100],"page-size":e.listPageParams.pageNum,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handlePageNumChange,"current-change":e.handlePageNoChange,"update:currentPage":function(t){e.$set(e.listPageParams,"pageNo + 1",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitleMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输用户名"},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),e._v(" "),"create"==e.dialogStatus?a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"单位名称",prop:"company_name"}},[a("el-input",{attrs:{placeholder:"请输单位名称"},model:{value:e.editForm.company_name,callback:function(t){e.$set(e.editForm,"company_name",t)},expression:"editForm.company_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位主管",prop:"company_bu"}},[a("el-input",{attrs:{placeholder:"请输单位主管"},model:{value:e.editForm.company_bu,callback:function(t){e.$set(e.editForm,"company_bu",t)},expression:"editForm.company_bu"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位地址",prop:"company_addr"}},[a("el-input",{attrs:{placeholder:"请输单位地址"},model:{value:e.editForm.company_addr,callback:function(t){e.$set(e.editForm,"company_addr",t)},expression:"editForm.company_addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位经纬度",prop:"company_position"}},[a("el-input",{attrs:{placeholder:"请输单位经纬度"},model:{value:e.editForm.company_position,callback:function(t){e.$set(e.editForm,"company_position",t)},expression:"editForm.company_position"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择角色"},model:{value:e.editForm.roleId,callback:function(t){e.$set(e.editForm,"roleId",t)},expression:"editForm.roleId"}},e._l(e.editRolesOptions,function(t){return a("el-option",{key:t.roleId,attrs:{label:t.roleDesc,value:t.roleId,disabled:e.editIsDisabled[t.statu]}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.roleDesc))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.roleCode))])])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"单位状态",prop:"company_status"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择单位状态",clearable:"",filterable:""},model:{value:e.editForm.company_status,callback:function(t){e.$set(e.editForm,"company_status",t)},expression:"editForm.company_status"}},e._l(e.statusOptions,function(t,s){return a("el-option",{key:s,attrs:{label:e._f("statusFilter")(t),value:t}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.formCancel("editForm")}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.formCreate("editForm")}}},[e._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.formUpdate("editForm")}}},[e._v("修 改")])],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(l,c,!1,null,null,null);t.default=u.exports},ctMr:function(e,t,a){var s=a("z4F4");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("6077c87a",s,!0)},z4F4:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".waves-ripple {\n    position: absolute;\n    border-radius: 100%;\n    background-color: rgba(0, 0, 0, 0.15);\n    background-clip: padding-box;\n    pointer-events: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-transform: scale(0);\n    transform: scale(0);\n    opacity: 1;\n}\n\n.waves-ripple.z-active {\n    opacity: 0;\n    -webkit-transform: scale(2);\n    transform: scale(2);\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;\n}",""])}});